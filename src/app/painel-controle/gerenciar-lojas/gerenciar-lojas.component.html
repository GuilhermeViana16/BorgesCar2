<div class="container-fluid">
  <div class="row">
    <nav style="margin-top: -24px" class="col-md-2  d-md-block bg-light sidebar">
      <app-sidebar></app-sidebar>
    </nav>

    <main style="margin-top: -24px" role="main" class="col-md-10 ml-sm-auto col-lg-10 px-4"><div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
      <br>
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Gerenciar Lojas</h1>
        <button [routerLink]="['/nova-loja']" class="btn btn-outline-warning float-right">Cadastrar Loja</button>
      </div>
      
      <table class="table text-center">
        <thead class="thead-light">
          <tr>
            <th><h6>Nome</h6></th>
            <th><h6>Categoria</h6></th>
            <th><h6>Sobre</h6></th>
            <th><h6>Imagem</h6></th>
            <th><h6>Editar</h6></th>
          </tr>
        </thead>
        <tbody id="myTable" *ngFor="let loja of lojas">
          <tr>
            <td>{{loja.name}}</td>
            <td>{{loja.category}}</td>
            <td style="
            max-width:2px; 
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;">{{loja.about}}...</td>
            <td><img class="img-thumbnail" style="height: 120px; width: 180px;" [src]="loja.file"></td>
            <td style="width: 15%;">
              <button style="float: left; margin-bottom: 15px;" class="btn btn-outline-success" 
                data-toggle="modal" data-target="#myModal" 
                  (click)="onEdit(loja, modalLoja)">Atualizar</button>
              <button style="float: right;" class="btn btn-outline-danger" 
                data-toggle="modal" data-target="#myModal" 
                  (click)="remover(loja)">Remover</button>
            </td>
          </tr>
        </tbody>
      </table>
      
    </main>
  </div>
</div>

<ng-template #modalLoja>

  
  <div class="modal-header">
    <h4 class="modal-title">Atualizar Loja</h4>
    <button type="button" (click)="fecharModal()" class="close" data-dismiss="modal">&times;</button>
  </div>

  <!-- Modal body -->
  <div class="modal-body">
    
    <div class="form-group">
      <label for="name">Nome</label> 
      <input [(ngModel)]="loja.name" type="text" class="form-control" id="name">
    </div>
    <div class="form-group">
      <label for="category">Categoria</label>
      <input [(ngModel)]="loja.category" type="text" class="form-control" id="category" >
    </div>
    <div class="mb-3">
      <label for="validationTextarea">Sobre</label>
      <textarea [(ngModel)]="loja.about" class="form-control" id="validationTextarea">
      </textarea>
    </div>

  </div>

  <!-- Modal footer -->
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-success" data-dismiss="modal" (click)="atualizar()">Atualizar</button>
    <button type="button" class="btn btn-outline-danger" data-dismiss="modal" (click)="fecharModal()">Cancelar</button>
  </div>

</ng-template>

<swal 
#upgradeSwal
title="Sucesso"
text="Loja atualizada com sucesso!"
type="success"
(confirm)="fecharModal()">
</swal>

<swal 
#deleteSwal2
title="Sucesso"
text="Loja removida com sucesso!"
type="success"
(confirm)="listar()">
</swal>